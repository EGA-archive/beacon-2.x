<div id="table-wrapper">
    <table id="main-result">
        <thead>
            <tr>
                <th class="extra-info-trigger"></th>
                <th>Variant ID</th>
                <th>Assembly ID</th>
                <th>Chromosome</th>
                <th>RefSeq ID</th>
                <th>Reference</th>
                <th>Alternate</th>
                <th>Start</th>
                <th>End</th>
                <th>Variant Alternative IDs</th>
                <th>Variant Type</th>
                <th>Genomic HGVS ID</th>
                <th>Transcript HGVS IDs</th>
                <th>Protein HGVS IDs</th>
                <th>Genomic Regions</th>
                <th>Molecular Effects</th>
                <th>Aminoacid Changes</th>

            </tr>
        </thead>
        <tbody>
            {% for record in records %}
                <tr>
                    <td class="extra-info-trigger" title="Click to open a side panel with extra information."><i class="far fa-plus-square"></i></td>
                    <td>{{ record.variant_id|default("-",true) }}</td>
                    <td>{{ record.assembly_id|default("-",true) }}</td>
                    <td>{{ record.chromosome|default("-",true) }}</td>
                    <td>{{ record.refseq_id|default("-",true) }}</td>
                    <td>{{ record.reference|default("-",true) }}</td>
                    <td>{{ record.alternate|default("-",true) }}</td>
                    <td>{{ record.start|default("-",true) }}</td>
                    <td>{{ record.end|default("-",true) }}</td>
                    <td>{{ record.variant_type|default("-",true) }}</td>
                    <td>{{ record.variant_name|default("-",true)|join(", ") }}</td>
                    <td>{{ record.genomic_hgvs_id|default("-",true) }}</td>
                    <td>{{ record.transcript_hgvs_ids|default("-",true)|join(", ") }}</td>
                    <td>{{ record.protein_hgvs_ids|default("-",true)|join(", ") }}</td>
                    <td title="Ontology term: {{record.genomic_regions_ontology|default("-",true)|join(", ")}}">{{ record.genomic_regions|default("-",true)|join(", ") }}</td>
                    <td title="Ontology term: {{record.molecular_effects_ontology|default("-",true)|join(", ")}}">{{ record.molecular_effects|default("-",true)|join(", ") }}</td>
                    <td>{{ record.aminoacid_changes|default("-",true)|join(", ") }}</td>
                    <td class="hidden">
                        <h1><i class="fas fa-times close-button"></i>Variant {{ record.variant_id|default("-",true) }}</h1>
                        <section>
                            <h2>Genomic Features</h2>
                            <div class="extra-info-table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>id</th>
                                            <th>symbol</th>
                                            <th>alternateIds</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for feature in record.genomic_features_ontology.parsed %}
                                            <tr>
                                                <td>{{ feature.id|default("-",true) }}</td>    
                                                <td>{{ feature.symbol|default("-",true) }}</td>    
                                                <td>{{ feature.alternate_ids|default("-",true) }}</td>    
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </section>
                        <section>
                            <h2>Dataset Response</h2>
                            <div class="extra-info-table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>datasetId</th>
                                            <th>exists</th>
                                            <th>matchingSampleCount</th>
                                            <th>note</th>
                                            <th>frequency</th>
                                            <th>handovers</th>
                                            <th>externalUrl</th>
                                            <th>callCount</th>
                                            <th>sampleCount</th>
                                            <th>variantCount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for dataset in record.dataset_response.parsed %}
                                        <tr>
                                            <td>{{ dataset.datasetId|default("-",true) }}</td>
                                            <td>{{ dataset.exists|default("-",true) }}</td>
                                            <td>{{ dataset.info.matchingSampleCount|default("-",true) }}</td>
                                            <td>{{ dataset.note|default("-",true) }}</td>
                                            <td>{{ "%.4f"|format(dataset.frequency) }}</td>
                                            <td class="handover-cell no-wrap">
                                                {% for handover in dataset.handovers%}
                                                    <a href="{{handover.url}}" title="{{handover.handoverType.id}}:{{handover.handoverType.label}}" target="_blank">{{ handover.note }} <i class="fas fa-external-link-alt"></i></a>
                                                {% endfor %}
                                            </td>
                                            <td>{{ dataset.externalUrl|default("-",true) }}</td>
                                            <td>{{ dataset.callCount|default("-",true) }}</td>
                                            <td>{{ dataset.sampleCount|default("-",true) }}</td>
                                            <td>{{ dataset.variantCount|default("-",true) }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </section>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div id="extra-info" class="hidden">
</div>