<div id="table-wrapper">
    <table id="main-result">
        <thead>
            <tr>
                <th class="extra-info-trigger"></th>
                <th>Subject ID</th>
                <th>Datasets IDs</th>
                <th>Taxon</th>
                <th>Sex</th>
                <th>Ethnicity</th>
                <th>Geographic Origin</th>
                <th>SRA Family ID</th>
                <th>Race</th>
                <th>Date Of Birth</th>
                <th>Weight<span>(kg)</span></th>
                <th>Height<span>(cm)</span></th>
                <th>Blood Type</th>
                <th>Alternative IDs</th>
                <th>Alternative IDs Phenopackets</th>
            </tr>
        </thead>
        <tbody>
            {% for record in records %}
                <tr>
                    <td class="extra-info-trigger" title="Click to open a side panel with extra information."><i class="far fa-plus-square"></i></td>
                    <td>{{ record.individual_stable_id|default("-",true) }}</td>
                    <td>{{ record.dataset_ids|default("-",true)|join(", ") }}</td>
                    <td title="Ontology term: {{record.taxon_id_ontology|default("-",true)}}">{{ record.taxon_id_ontology_label|default("-",true) }}</td>
                    <td title="Ontology term: {{record.sex_ontology|default("-",true)}}">{{ record.sex|default("-",true) }}</td>
                    <td title="Ontology term: {{record.ethnicity_ontology|default("-",true)}}">{{ record.ethnicity|default("-",true) }}</td>
                    <td title="Ontology term: {{record.geographic_origin_ontology|default("-",true)}}">{{ record.geographic_origin|default("-",true) }}</td>
                    <td>{{ record.sra_family_id|default("-",true) }}</td>
                    <td>{{ record.race|default("-",true) }}</td>
                    <td>{{ record.date_of_birth|default("-",true) }}</td>
                    <td>{{ record.weight_kg|default("-",true) }}</td>
                    <td>{{ record.height_cm|default("-",true) }}</td>
                    <td>{{ record.blood_type|default("-",true) }}</td>
                    <td>{{ record.alternative_ids|default("-",true)|join(", ") }}</td>
                    <td>{{ record.alternative_ids_phenopackets|default("-",true)|join(", ") }}</td>
                    <td class="hidden">
                        <h1><i class="fas fa-times close-button"></i>Individual {{ record.individual_stable_id|default("-",true) }}</h1>
                        <section>
                            <h2>Phenotypic Features</h2>
                            <div class="extra-info-table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>phenotypeId</th>
                                            <th>severity</th>
                                            <th>onsetType</th>
                                            <th>ageOfOnset</th>
                                            <th>dateOfOnset</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for feature in record.phenotypic_features.parsed %}
                                        <tr>
                                            <td>{{ feature.phenotypeId|default("-",true) }}</td>
                                            <td>{{ feature.severity|default("-",true) }}</td>
                                            <td>{{ feature.onsetType|default("-",true) }}</td>
                                            <td>{{ feature.ageOfOnset|default("-",true) }}</td>
                                            <td>{{ feature.dateOfOnset|default("-",true) }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </section>
                        <section>
                            <h2>Diseases</h2>
                            <div class="extra-info-table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>diseaseId</th>
                                            <th>stage</th>
                                            <th>severity</th>
                                            <th>onsetType</th>
                                            <th>ageOfOnset</th>
                                            <th>dateOfOnset</th>
                                            <th>familyHistory</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for disease in record.diseases.parsed %}
                                        <tr>
                                            <td>{{ disease.diseaseId|default("-",true) }}</td>
                                            <td>{{ disease.stage|default("-",true) }}</td>
                                            <td>{{ disease.severity|default("-",true) }}</td>
                                            <td>{{ disease.onsetType|default("-",true) }}</td>
                                            <td>{{ disease.ageOfOnset|default("-",true) }}</td>
                                            <td>{{ disease.dateOfOnset|default("-",true) }}</td>
                                            <td>{{ disease.familyHistory|default("-",true) }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </section>     
                        <section>
                            <h2>Medications</h2>
                            <div class="extra-info-table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>name</th>
                                            <th>dosage</th>
                                            <th>frequency</th>
                                            <th>start</th>
                                            <th>end</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for medication in record.medications.parsed %}
                                            <tr>
                                                <td>{{ medication.name|default("-",true) }}</td>    
                                                <td>{{ medication.dosage|default("-",true) }}</td>    
                                                <td>{{ medication.frequency|default("-",true) }}</td>    
                                                <td>{{ medication.start|default("-",true) }}</td>    
                                                <td>{{ medication.end|default("-",true) }}</td>    
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </section>
                        <section>
                            <h2>Interventions</h2>
                            <div class="extra-info-table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>interventionId</th>
                                            <th>modifier</th>
                                            <th>date</th>
                                            <th>ageAtIntervention</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for procedure in record.procedures.parsed %}
                                        <tr>
                                            <td>{{ procedure.intervention_id|default("-",true) }}</td>    
                                            <td>{{ procedure.modifier|default("-",true) }}</td>    
                                            <td>{{ procedure.date|default("-",true) }}</td>    
                                            <td>{{ procedure.age_at_intervention|default("-",true) }}</td>    
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </section>                    
                        <section>
                            <h2>Measures</h2>
                            <div class="extra-info-table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>measureId</th>
                                            <th>modifier</th>
                                            <th>date</th>
                                            <th>ageAtMeasure</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!--  for procedure in record.measures.parsed  -->
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <!-- <td> procedure.measure_id|default("-",true) </td>    
                                            <td> procedure.modifier|default("-",true) </td>    
                                            <td> procedure.date|default("-",true) </td>    
                                            <td> procedure.age_at_measure|default("-",true) </td>     -->
                                        </tr>
                                        <!--  endfor  -->
                                    </tbody>
                                </table>
                            </div>
                        </section>                    
                        <section>
                            <h2>Exposures</h2>
                            <div class="extra-info-table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>exposureId</th>
                                            <th>modifier</th>
                                            <th>date</th>
                                            <th>ageAtExposure</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!--  for procedure in record.exposures.parsed  -->
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <!-- <td> procedure.exposure_id|default("-",true) </td>    
                                            <td> procedure.modifier|default("-",true) </td>    
                                            <td> procedure.date|default("-",true) </td>    
                                            <td> procedure.age_at_exposure|default("-",true) </td>     -->
                                        </tr>
                                        <!--  endfor  -->
                                    </tbody>
                                </table>
                            </div>
                        </section>                    
                        <section>
                            <h2>Pedigrees</h2>
                            <div class="extra-info-table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>pedigreeId</th>
                                            <th>numSubjects</th>
                                            <th>pedigreeRole</th>
                                            <th>affectedStatus</th>
                                            <th>pedigreeDisease</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for pedigree in record.pedigrees.parsed %}
                                        <tr>
                                            <td>{{ pedigree.pedigreeId|default("-",true) }}</td>
                                            <td>{{ pedigree.numSubjects|default("-",true) }}</td>
                                            <td>{{ pedigree.pedigreeRole|default("-",true) }}</td>
                                            <td>{{ pedigree.affectedStatus|default("-",true) }}</td>
                                            <td>{{ pedigree.pedigreeDisease|default("-",true) }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </section>      
                        <section>
                            <h2>Handovers</h2>
                            <div class="extra-info-table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th>note</th>
                                            <th>handoverType</th>
                                            <th>url</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for handover in record.handovers.parsed %}
                                        <tr>
                                            <td class="handover-cell">
                                                <a href="{{handover.url}}" target="_blank"><i class="fas fa-external-link-alt"></i></a>
                                            </td>
                                            <td>{{ handover.note|default("-",true) }}</td>
                                            <td>{{handover.handoverType.id}}:{{handover.handoverType.label}}</td>
                                            <td class="handover-cell"><a href="{{handover.url}}" target="_blank">{{ handover.url }}</a></td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </section>
 
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div id="extra-info" class="hidden">
</div>